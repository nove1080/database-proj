<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@ page import="java.util.HashMap"%>
<%@ page import="java.util.Map"%>
<%@ page import="java.util.List" %>
<%@ page import="java.util.Iterator"%>
<%@ page import="java.sql.Date"%>
<%@ page import="utils.BoardPage" %>
<%@ page import="dto.ReservationDTO" %>
<%@ page import="dao.ReservationDAO" %>
<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@ include file="../process/isLoggedIn.jsp" %>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>
<div id="wrap">
		<h2>예약 내역</h2>
		<form action="../process/reservationDeleteProcess.jsp" method="POST">
		<table align="center">
			<tr>
				<th>번호</th>
				<th>풋살장</th>
				<th>일자</th>
				<th>시작시간</th>
				<th>종료시간</th>
				<th>선택</th>
			</tr>
			<c:choose>
				<c:when test="<%= reservationList.isEmpty() %>" >
					<tr>
						<td colspan="6">예약 내역이 존재하지 않습니다.</td>
					</tr>
				</c:when>
				<c:otherwise >
					<c:set var="virtualNum" value="<%= totalPost - (currentPage - 1) * 10 %>" />
					<c:forEach items="<%= reservationList %>" var="reservation">
						<c:set var="num" value="${ reservation.getNum() }"/>
						<c:set var="fname" value="${ reservation.getFname() }"/>
						<c:set var="date" value="${ reservation.getReservationDate() }"/>
						<c:set var="startTime" value="${ reservation.getStartTime() }"/>
						<c:set var="endTime" value="${ reservation.getEndTime() }"/>
						
						<tr>
							<td>${ virtualNum = virtualNum - 1 }</td>
							<td>${ fname = reservation.getFname() }</td>
							<td>${ date }</td>
							<td>${ startTime }</td>
							<td>${ endTime }</td>
							<td><input type="checkbox" name="deleted" value=${ num } /></td>
						</tr>
					</c:forEach>
				</c:otherwise>
			</c:choose>
		</table>
		<!-- 페이지 이동 블록 -->
		<table align="center">
			<tr>
				<td>
				<div class="paging">
				<%= BoardPage.pagingStr(totalPost, currentPage, blockSize, pageSize, "history.jsp") %>
				</div>
				</td>
				<td width="15%"><button type="submit">삭제하기</button></td>
			</tr>
		</table>
		</form>
	</div>
</body>
</html>